!function(t){function e(e){for(var r,c,s=e[0],a=e[1],u=e[2],d=0,f=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);for(l&&l(e);f.length;)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var a=n[s];0!==o[a]&&(r=!1)}r&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},o={8:0},i=[];function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var s=window.webpackJsonp=window.webpackJsonp||[],a=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=a;i.push(["A9IG",0]),n()}({A9IG:function(t,e,n){"use strict";n.r(e),n.d(e,"checkoutControlsSelectors",(function(){return x})),n.d(e,"setIsInterruptable",(function(){return I})),n.d(e,"isInterruptable",(function(){return L})),n.d(e,"isExpired",(function(){return E})),n.d(e,"isStarted",(function(){return A})),n.d(e,"findTimerData",(function(){return M})),n.d(e,"beaconInterrupt",(function(){return B})),n.d(e,"syncWithBackend",(function(){return X})),n.d(e,"start",(function(){return V})),n.d(e,"reset",(function(){return $})),n.d(e,"pause",(function(){return tt})),n.d(e,"resume",(function(){return et})),n.d(e,"setTargetDom",(function(){return rt})),n.d(e,"syncOnLoad",(function(){return ot})),n.d(e,"watchCheckoutControls",(function(){return ct})),n.d(e,"getWatchedCheckoutControls",(function(){return st})),n.d(e,"setHealthcheckLoopId",(function(){return at})),n.d(e,"getHealthcheckTimeoutId",(function(){return ut})),n.d(e,"getCountdownTimeoutId",(function(){return lt})),n.d(e,"getResumeTimeoutId",(function(){return dt}));var r=n("lSNA"),o=n.n(r),i=n("yXPU"),c=n.n(i);const s=tec.tickets.seating.frontend.session;n("lo4d");var a=n("g56x"),u=n("MsaN");function l(t){return Object(u.createHtmlComponentFromTemplateString)('<script\n\t\tid="tec-tickets-seating-interrupt-dialog-template"\n\t\ttype="text/template"\n\t\tdata-js="{dataJs}"\n\t>\n\t\t<div class="tribe-tickets-seating__interrupt-dialog" role="dialog">\n\t\t\t<div class="tribe-tickets-seating__interrupt-header">\n\t\t\t\t<div class="dashicons dashicons-clock"></div>\n\t\t\t\t<p class="tribe-tickets-seating__interrupt-title">{title}</p>\n\t\t\t</div>\n\t\t\t<div class="tribe-dialog__content tribe-modal__content tribe-tickets-seating__interrupt-content">{content}</div>\n\t\t\t<div class="tribe-tickets-seating__interrupt-footer">\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\tonclick="window.location.href=\'{redirectUrl}\'"\n\t\t\t\t\tclass="tribe-common-c-btn tribe-common-c-btn--small"\n\t\t\t\t>\n\t\t\t\t\t{buttonLabel}\n\t\t\t\t</button>\n\t\t</div>\n\t<\/script>',t)}var d=n("l3Sj");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const{ajaxUrl:m,ajaxNonce:b,ACTION_START:h,ACTION_SYNC:y,ACTION_INTERRUPT_GET_DATA:g}=s;let k=null,_=null,w=null,v=!1,O=!0,j=!1,T=null,P=document,S=[];const x=".tribe-tickets__commerce-checkout-form-submit-button, .tribe-tickets__commerce-checkout-paypal-buttons button";function I(t){O=t}function L(){return O}function C(t){j=t}function E(){return j}function U(t){v=t}function A(){return v}function N(){return P.querySelectorAll(".tec-tickets-seating__timer")}function M(){const t=N();if(0===t.length)return null;let e=null,n=null,r=null;return Array.from(t).find(t=>!!(t.dataset.token&&t.dataset.postId&&t.dataset.redirectUrl)&&(e=t.dataset.token,n=t.dataset.postId,r=t.dataset.redirectUrl,!0)),e&&n&&r?{token:e,postId:n,redirectUrl:r}:null}function D(t,e,n){t.classList.remove("tec-tickets-seating__timer--hidden");const r=t.querySelector(".tec-tickets-seating__time-minutes"),o=t.querySelector(".tec-tickets-seating__time-seconds");r&&o&&(r.innerText=e,o.innerText=String(n).padStart(2,"0"))}function R(){return F.apply(this,arguments)}function F(){return(F=c()((function*(){const{postId:t,token:e}=M(),n=new URL(m);n.searchParams.set("_ajaxNonce",b),n.searchParams.set("action",g),n.searchParams.set("postId",t),n.searchParams.set("token",e);const r=yield fetch(n.toString(),{method:"GET"}),o={title:Object(d._x)("Time limit expired","Seat selection expired timer title","event-tickets"),content:Object(d._x)("Your seat selections are no longer reserved, but tickets are still available.","Seat selection expired timer content","event-tickets"),buttonLabel:Object(d._x)("Find Seats","Seat selection expired timer button label","event-tickets"),redirectUrl:window.location.href};if(!r.ok)return console.error("Failed to fetch interrupt modal data"),o;const i=yield r.json();return i.success&&i.data?{title:i.data.title||o.title,content:i.data.content||o.content,buttonLabel:i.data.buttonLabel||o.buttonLabel,redirectUrl:i.data.redirectUrl||o.redirectUrl}:(console.error("Failed to fetch interrupt modal data"),o)}))).apply(this,arguments)}function q(){return G.apply(this,arguments)}function G(){return(G=c()((function*(){var t;const e=null===(t=N())||void 0===t?void 0:t[0];if(!e)return console.warn("No timer element found"),null;const{title:n,content:r,buttonLabel:o,redirectUrl:i}=yield R();e.dataset.content="dialog-content-tec-tickets-seating-timer-interrupt";let c=".tec-tickets-seating__timer";var s;(e.closest(".tribe-dialog")&&(c=".tribe-tickets__tickets-form, .tec-tickets-seating__tickets-block"),T)||(T=l({dataJs:"dialog-content-tec-tickets-seating-timer-interrupt",title:n,content:r,buttonLabel:o,redirectUrl:i}),null===(s=P.querySelector(c))||void 0===s||s.appendChild(T));return new A11yDialog({trigger:".tec-tickets-seating__timer",appendTarget:c,wrapperClasses:"tribe-dialog",overlayClasses:"tribe-dialog__overlay tribe-modal__overlay",contentClasses:"tribe-dialog__wrapper tribe-tickets-seating__interrupt-wrapper",overlayClickCloses:!1})}))).apply(this,arguments)}function J(){return H.apply(this,arguments)}function H(){return(H=c()((function*(){if(!L())return;I(!0),N().forEach(t=>{D(t,0,0)}),C(!0),clearTimeout(k),k=null,clearTimeout(_),_=null;const t=yield q();Object(a.doAction)("tec.tickets.seating.timer_interrupt"),t&&(t.show(),t.shown=!1),I(!1)}))).apply(this,arguments)}function B(){if(!L())return;const{postId:t,token:e}=M(),n=new URL(m);n.searchParams.set("_ajaxNonce",b),n.searchParams.set("action",g),n.searchParams.set("postId",t),n.searchParams.set("token",e),window.navigator.sendBeacon(n.toString())}function W(t){L()&&(t<=0?J():(U(!0),k=setTimeout(()=>{t-=1,N().forEach(e=>{D(e,Math.floor(t/60),t%60)}),E()||W(t)},1e3)))}function Y(){!E()&&L()&&(_=setTimeout(c()((function*(){yield X(),Y()})),3e3))}function X(){return z.apply(this,arguments)}function z(){return(z=c()((function*(){if(E()||0===N().length||!L())return;const t=yield K(y);t<=0?J():(k&&(clearTimeout(k),k=null),W(t),_||Y())}))).apply(this,arguments)}function K(t){return Q.apply(this,arguments)}function Q(){return(Q=c()((function*(t){const e=M();if(null===e)return!1;if(-1===[h,y].indexOf(t))return!1;const n=new URL(m);n.searchParams.set("_ajaxNonce",b),n.searchParams.set("action",t),n.searchParams.set("token",e.token),n.searchParams.set("postId",e.postId);const r=yield fetch(n.toString(),{method:"POST"});if(!r.ok)return!1;const o=yield r.json();if(!(o.success&&o.data.secondsLeft&&o.data.timestamp))return console.error("Failed to communicate with the backend"),!1;const i=o.data;return i.secondsLeft-Math.max(0,Math.floor(i.timestamp-Date.now()/1e3))}))).apply(this,arguments)}function V(){return Z.apply(this,arguments)}function Z(){return(Z=c()((function*(){if(U()||0===N().length)return;const t=yield K(h),{postId:e,token:n}=M();if(!(t&&e&&n))return void J();const r=Math.floor(t/60),o=t%60;N().forEach(t=>{D(t,r,o)}),U(!0),W(t),Y()}))).apply(this,arguments)}function $(){k&&clearTimeout(k),_&&clearTimeout(_),w&&clearTimeout(w),v=!1,j=!1,_=null,k=null,w=null,O=!0,S.forEach(t=>{t.removeEventListener("click",tt),t.removeEventListener("submit",tt)}),S=[]}function tt(){I(!1),_&&(clearTimeout(_),_=null),k&&(clearTimeout(k),k=null),w=setTimeout(et,3e4)}function et(){return nt.apply(this,arguments)}function nt(){return(nt=c()((function*(){w&&(clearTimeout(w),w=null),I(!0),yield X()}))).apply(this,arguments)}function rt(t){P=t||document}function ot(){return it.apply(this,arguments)}function it(){return(it=c()((function*(){0!==Array.from(N()).filter(t=>"syncOnLoad"in t.dataset).length&&(I(!0),window.addEventListener("beforeunload",B),yield X())}))).apply(this,arguments)}function ct(){const t=Object(a.applyFilters)("tec.tickets.seating.frontend.session.checkoutControls",x);P.querySelectorAll(t).forEach(t=>{S.push(t),t.addEventListener("click",tt),t.addEventListener("submit",tt)})}function st(){return S}function at(t){return _=t,_}function ut(){return _}function lt(){return k}function dt(){return w}Object(u.onReady)(()=>ot()),Object(u.onReady)(()=>ct()),window.tec=window.tec||{},window.tec.tickets=window.tec.tickets||{},window.tec.tickets.seating=window.tec.tickets.seating||{},window.tec.tickets.seating.frontend=window.tec.tickets.seating.frontend||{},window.tec.tickets.seating.frontend.session=p(p({},window.tec.tickets.seating.frontend.session||{}),{},{start:V,reset:$,syncOnLoad:ot,interrupt:J,setIsInterruptable:I})},MsaN:function(t,e){t.exports=tec.tickets.seating.utils},g56x:function(t,e){t.exports=wp.hooks},l3Sj:function(t,e){t.exports=wp.i18n},lo4d:function(t,e,n){}});