/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

var tribe_event_tickets_plus=tribe_event_tickets_plus||{};tribe_event_tickets_plus.meta=tribe_event_tickets_plus.meta||{},tribe_event_tickets_plus.meta.event=tribe_event_tickets_plus.meta.event||{},function(window,document,$,my){my.selectors={field:{text:".tribe-tickets-meta-text",checkbox:".tribe-tickets-meta-checkbox",select:".tribe-tickets-meta-select",radio:".tribe-tickets-meta-radio",number:".ticket-meta-number-field"},quantity:"input.tribe-tickets-quantity",name:"input.tribe-tickets-full-name",email:"input.tribe-tickets-email",horizontal_datepicker:{container:".tribe_horizontal_datepicker__container",select:".tribe_horizontal_datepicker__container select",day:".tribe_horizontal_datepicker__day",month:".tribe_horizontal_datepicker__month",year:".tribe_horizontal_datepicker__year",value:".tribe_horizontal_datepicker__value"}},my.horizontal_datepicker={},my.init=function(){$(".tribe-list").on("click",".attendee-meta.toggle",(function(){const $toggle=$(this),newText=$toggle.hasClass("on")?$toggle.data("view-text"):$toggle.data("hide-text");$toggle.text(newText).toggleClass("on").siblings(".attendee-meta-row").slideToggle()})),this.$ticket_form=$(".tribe-events-tickets").closest(".cart"),this.$ticket_form.on("change",".tribe-tickets-order_status-row select",this.event.status_changed).on("change",".quantity input, .quantity select",this.event.quantity_changed).on("keyup input",".quantity input",this.event.quantity_changed),this.$ticket_form.find('.quantity input:not([type="hidden"]), .quantity select').each((function(){my.set_quantity($(this))})),$(".tribe-event-tickets-plus-meta-fields").on("keydown",".tribe-tickets-meta-number input",this.event.limit_number_field_typing),this.$rsvp_block=$(".tribe-block__rsvp"),this.$rsvp_block.on("change",".tribe-block__rsvp__number-input input",this.event.block_quantity_changed).on("keyup",".tribe-block__rsvp__number-input input",this.event.block_quantity_changed),this.horizontal_datepicker.populateSelects()},my.render_fields=function(ticket_id,num){const $row=$(".tribe-event-tickets-plus-meta").filter('[data-ticket-id="'+ticket_id+'"]'),$template=$row.find(".tribe-event-tickets-plus-meta-fields-tpl"),$fields=$row.find(".tribe-event-tickets-plus-meta-fields"),template_html=$template.html();if(!my.has_meta_fields(ticket_id))return;const current_count=$fields.find(".tribe-event-tickets-plus-meta-attendee").length;let diff=0;if(current_count>num)return diff=current_count-num,void $fields.find(".tribe-event-tickets-plus-meta-attendee:nth-last-child(-n+"+diff+")").remove();diff=num-current_count;let i=0;for(;i<diff;i++){let tweaked_template_html=template_html;tweaked_template_html=template_html.replace(/tribe-tickets-meta\[\]/g,"tribe-tickets-meta["+ticket_id+"]["+(current_count+i)+"]"),tweaked_template_html=tweaked_template_html.replace(/tribe-tickets-meta_([a-z0-9-]+)_/g,"tribe-tickets-meta_$1_"+(current_count+i)+"_"),$fields.append(tweaked_template_html)}},my.set_quantity=function($field){if("yes"===$field.closest("form").find(".tribe-tickets-order_status-row select").val()){const quantity=parseInt($field.val(),10),ticket_id=parseInt($field.closest("td").data("product-id"),10);my.render_fields(ticket_id,quantity)}},my.block_set_quantity=function($field,going){const quantity=going?parseInt($field.val(),10):0,ticket_id=parseInt($field.closest("form").data("product-id"),10);my.render_fields(ticket_id,quantity)},my.has_meta_fields=function(ticket_id){const template_html=$(document.getElementById("tribe-event-tickets-plus-meta-fields-tpl-"+ticket_id)).html();return!!$(template_html).find(".tribe-tickets-meta").length},my.validate_meta=function($form){let is_valid=!0;return $form.find(".tribe-tickets-meta-required").each((function(){const $field=$(this);let val="";val=$field.is(my.selectors.field.radio)||$field.is(my.selectors.field.checkbox)?$field.find("input:checked").length?"checked":"":$field.is(my.selectors.field.select)?$field.find("select").val():$field.is(my.selectors.horizontal_datepicker.day)||$field.is(my.selectors.horizontal_datepicker.month)||$field.is(my.selectors.horizontal_datepicker.year)?$field.val():$field.find("input, textarea").val().trim(),null!==val&&0!==val.length||(is_valid=!1)})),is_valid},my.event.quantity_changed=function(){my.set_quantity($(this))},my.event.status_changed=function(){const $quantity=my.$ticket_form.find(".quantity"),going="yes"===$(this).val(),ticket_id=parseInt($quantity.data("product-id"),10),quantity=going?parseInt($quantity.find(".tribe-tickets-quantity").val(),10):0;my.render_fields(ticket_id,quantity)},my.event.block_quantity_changed=function(){const going=my.$rsvp_block.find(".tribe-block__rsvp__status .tribe-active").hasClass("tribe-block__rsvp__status-button--going");my.block_set_quantity($(this),going)},my.event.limit_number_field_typing=function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||67===e.keyCode&&!0===e.ctrlKey||86===e.keyCode&&!0===e.ctrlKey||88===e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},my.horizontal_datepicker.populateSelects=function(){$(my.selectors.horizontal_datepicker.container).each((function(index,value){const wrapper=$(value),day=wrapper.find(my.selectors.horizontal_datepicker.day),month=wrapper.find(my.selectors.horizontal_datepicker.month),year=wrapper.find(my.selectors.horizontal_datepicker.year),savedValues=wrapper.find(my.selectors.horizontal_datepicker.value).val().split("-");3===savedValues.length&&(year.val(savedValues[0]),month.val(savedValues[1]),day.val(savedValues[2]))}))},my.horizontal_datepicker.populateHiddenValue=function(e){const wrapper=$(e.target).closest(my.selectors.horizontal_datepicker.container),day=wrapper.find(my.selectors.horizontal_datepicker.day),month=wrapper.find(my.selectors.horizontal_datepicker.month),year=wrapper.find(my.selectors.horizontal_datepicker.year),realValue=wrapper.find(my.selectors.horizontal_datepicker.value);realValue.val(year.val()+"-"+month.val()+"-"+day.val()),realValue.trigger("change")},my.horizontal_datepicker.makeDayMonthYearRequired=function(e){const hiddenValue=$(e.target),wrapper=hiddenValue.closest(my.selectors.horizontal_datepicker.container),isRequired=!(""===hiddenValue.val()||"null-null-null"===hiddenValue.val());wrapper.find(my.selectors.horizontal_datepicker.day).prop("required",isRequired),wrapper.find(my.selectors.horizontal_datepicker.month).prop("required",isRequired),wrapper.find(my.selectors.horizontal_datepicker.year).prop("required",isRequired),isRequired?(wrapper.find(my.selectors.horizontal_datepicker.day).addClass("tribe-tickets-meta-required"),wrapper.find(my.selectors.horizontal_datepicker.month).addClass("tribe-tickets-meta-required"),wrapper.find(my.selectors.horizontal_datepicker.year).addClass("tribe-tickets-meta-required")):(wrapper.find(my.selectors.horizontal_datepicker.day).removeClass("tribe-tickets-meta-required"),wrapper.find(my.selectors.horizontal_datepicker.month).removeClass("tribe-tickets-meta-required"),wrapper.find(my.selectors.horizontal_datepicker.year).removeClass("tribe-tickets-meta-required"))},my.horizontal_datepicker.ensurePositiveNumber=function(e){const input=$(e.target),inputValue=parseInt(input.val(),10),numberValue=Math.abs(inputValue);inputValue!==numberValue&&input.val(numberValue)},my.addListeners=function(){$(document).on("change",my.selectors.horizontal_datepicker.select,this.horizontal_datepicker.populateHiddenValue),$(document).on("change",my.selectors.field.number,this.horizontal_datepicker.ensurePositiveNumber),$(document).on("change",my.selectors.horizontal_datepicker.value,this.horizontal_datepicker.makeDayMonthYearRequired),$(window).on("tribe_et_after_form_prefills",this.horizontal_datepicker.populateSelects)},$((function(){my.init(),my.addListeners()}))}(window,document,jQuery,tribe_event_tickets_plus.meta);