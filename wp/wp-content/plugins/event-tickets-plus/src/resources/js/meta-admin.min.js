/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

var tribe_event_tickets_plus=tribe_event_tickets_plus||{};tribe_event_tickets_plus.meta=tribe_event_tickets_plus.meta||{},tribe_event_tickets_plus.meta.admin=tribe_event_tickets_plus.meta.admin||{},tribe_event_tickets_plus.meta.admin.event=tribe_event_tickets_plus.meta.admin.event||{},function(window,document,$,obj){const __=window.wp.i18n.__;obj.selectors={attendeeForm:"tribe-tickets-attendee-info-form",fieldsetSaved:".tribe-tickets__admin-attendees-saved-fields",fieldsetSavedHasIac:".tribe-tickets__admin-attendees-saved-fields--has-iac",iacNotice:".tribe-tickets__admin-attendees-info-iac-notice",iacMockedFields:".tribe-tickets__admin-attendees-info-iac-fields",iacMockedFieldsLabelRequired:".tribe-tickets__admin-attendee-info-field-title-label--required",iacNoneCheckbox:"#ticket_iac_setting_none",iacAllowedCheckbox:"#ticket_iac_setting_allowed",iacRequiredCheckbox:"#ticket_iac_setting_required",hidden:".tribe-common-a11y-hidden"},obj.init=function(){obj.$tribe_tickets=$(document.getElementById("tribetickets")),obj.$event_tickets=$(document.getElementById("event_tickets")),obj.$fieldsetPage=$(".post-type-ticket-meta-fieldset"),obj.$blockModal=$("#event-tickets-attendee-information"),obj.$event_tickets.on("change","input.show_attendee_info",obj.event.toggleLinkedForm).on("change",".save_attendee_fieldset",obj.event.toggleLinkedForm),$(".meta-postbox .hndle, .meta-postbox .handlediv").off("click"),obj.$tribe_tickets.on("change",".ticket-attendee-info-dropdown",obj.event.selectSavedFieldset).on("change",".save_attendee_fieldset",obj.event.toggleLinkedForm).on("click",".meta-postbox .hndle, .meta-postbox .handlediv",obj.event.clickPostbox).on("click","a.add-attendee-field",obj.event.addField).on("click","a.delete-attendee-field",obj.event.removeField).on("edit-ticket.tribe",obj.event.editTicket).on("saved-ticket.tribe",obj.event.savedTicket).on("click","#rsvp_form_toggle",obj.event.handleNewRsvp).on("click","#ticket_form_toggle",obj.event.handleNewTicket).on("change",obj.selectors.iacNoneCheckbox,obj.event.handleIacCheckbox).on("change",obj.selectors.iacAllowedCheckbox,obj.event.handleIacCheckbox).on("change",obj.selectors.iacRequiredCheckbox,obj.event.handleIacCheckbox).on("additionalValidation.tribe",obj.validateAttendeeLabels),obj.$fieldsetPage.on("click","#publish",obj.validateAttendeeLabels),obj.$blockModal.on("click",'button[type="submit"]',obj.validateAttendeeLabels),obj.initTicketFields(),obj.$event_tickets.trigger("event-tickets-plus-meta-initialized.tribe")},obj.initTicketFields=function(){obj.$event_tickets||(obj.$event_tickets=$(document.getElementById("event_tickets"))),obj.initCustomFieldSorting(),obj.maybeHideSavedFieldsSelect(),obj.maybeShowIacMockedFields(),obj.$event_tickets.trigger("event-tickets-plus-ticket-meta-initialized.tribe",{ticket_id:obj.$event_tickets.find("#ticket_id").val()})},obj.initCustomFieldSorting=function(){$(document.getElementById("tribe-tickets-attendee-sortables")).sortable({containment:"parent",items:".tribe-tickets__admin-attendee-info-field",handle:".hndle",tolerance:"pointer",connectWith:"#tribe-tickets-attendee-sortables"})},obj.validateAttendeeLabels=function(event,attendeeLablesIsValid){const attendeeForm=document.getElementById(obj.selectors.attendeeForm);if(!attendeeForm)return!0;const attendeeArray=[],attendeeLabels=attendeeForm.querySelectorAll("input[name$='[label]']");for(let i=0;i<attendeeLabels.length;i++){if(attendeeArray.indexOf(attendeeLabels[i].value)>-1){event.preventDefault(),alert(__("Duplicate labels are not allowed.\nPlease verify that you are not using the same label for different fields and try again.","event-tickets")),attendeeLablesIsValid=!1;break}attendeeArray.push(attendeeLabels[i].value)}return attendeeLablesIsValid},obj.toggleLinkedForm=function($checkbox){let $form=$();const formId=$checkbox.data("tribe-toggle");formId&&($form=$(document.getElementById(formId))),$checkbox.is(":checked")?$form.show():$form.hide()},obj.maybeHideSavedFieldsSelect=function(){$(".tribe-tickets__admin-attendee-info-field--active").length?$(obj.selectors.fieldsetSaved).hide():$(obj.selectors.fieldsetSaved).show()},obj.maybeShowIacMockedFields=function(){const iacAllowedChecked=$(obj.selectors.iacAllowedCheckbox).is(":checked"),iacRequiredChecked=$(obj.selectors.iacRequiredCheckbox).is(":checked");iacAllowedChecked||iacRequiredChecked?obj.showIacMockedFields():obj.hideIacMockedFields()},obj.hideIacMockedFields=function(){const $form=$(obj.selectors.iacAllowedCheckbox).closest("#ticket_form"),$iacNotice=$form.find(obj.selectors.iacNotice),$iacMockedFields=$form.find(obj.selectors.iacMockedFields),$fieldsetSaved=$form.find(obj.selectors.fieldsetSaved),hiddenClassName=obj.selectors.hidden.className();$iacNotice.addClass(hiddenClassName),$iacMockedFields.addClass(hiddenClassName),$fieldsetSaved.removeClass(obj.selectors.fieldsetSavedHasIac.className())},obj.showIacMockedFields=function(){const $form=$(obj.selectors.iacAllowedCheckbox).closest("#ticket_form"),$iacMockedFields=$form.find(obj.selectors.iacMockedFields),$iacNotice=$form.find(obj.selectors.iacNotice),$iacRequiredLabel=$iacMockedFields.find(obj.selectors.iacMockedFieldsLabelRequired),$fieldsetSaved=$form.find(obj.selectors.fieldsetSaved),iacRequiredChecked=$(obj.selectors.iacRequiredCheckbox).is(":checked"),hiddenClassName=obj.selectors.hidden.className();$iacNotice.removeClass(hiddenClassName),$iacMockedFields.removeClass(hiddenClassName),iacRequiredChecked?$iacRequiredLabel.removeClass(hiddenClassName):$iacRequiredLabel.addClass(hiddenClassName),$fieldsetSaved.addClass(obj.selectors.fieldsetSavedHasIac.className())},obj.event.handleIacCheckbox=function(e){e.preventDefault(),obj.maybeShowIacMockedFields()},obj.event.handleNewTicket=function(e){e.preventDefault(),obj.maybeShowIacMockedFields()},obj.event.handleNewRsvp=function(e){e.preventDefault(),obj.hideIacMockedFields()},obj.fetch_saved_fields=function(savedFieldsetId){const args={action:"tribe-tickets-load-saved-fields",fieldset:savedFieldsetId};return $.post(ajaxurl,args,"json")},obj.inject_saved_fields=function(savedFieldsetId){const fieldJqxhr=obj.fetch_saved_fields(savedFieldsetId);fieldJqxhr.done((function(response){response.success?($(document.getElementById("tribe-tickets-attendee-sortables")).append(response.data),obj.maybeHideSavedFieldsSelect(),obj.$event_tickets.trigger("event-tickets-plus-fieldset-loaded.tribe",{fieldset_id:savedFieldsetId})):obj.$event_tickets.trigger("event-tickets-plus-fieldset-load-failure.tribe",{fieldset_id:savedFieldsetId})})),fieldJqxhr.fail((function(){obj.$event_tickets.trigger("event-tickets-plus-fieldset-load-failure.tribe",{fieldset_id:savedFieldsetId})}))},obj.addField=function(type){const args={action:"tribe-tickets-info-render-field",type:type},jqxhr=$.post(ajaxurl,args,"json");jqxhr.done((function(response){response.success?($(document.getElementById("tribe-tickets-attendee-sortables")).append(response.data),obj.maybeHideSavedFieldsSelect(),obj.$event_tickets.trigger("event-tickets-plus-field-added.tribe",{type:type})):obj.$event_tickets.trigger("event-tickets-plus-field-add-failure.tribe",{type:type})})),jqxhr.fail((function(){obj.$event_tickets.trigger("event-tickets-plus-field-add-failure.tribe",{type:type})}))},obj.removeField=function($field){let fieldHtml="";fieldHtml="undefined"!==$field[0].outerHTML?$field[0].outerHTML:$("<div>").append($field.eq(0).clone()).html(),$field.remove(),obj.maybeHideSavedFieldsSelect(),obj.$event_tickets.trigger("event-tickets-plus-field-removed.tribe",{field:fieldHtml})},obj.toggle_postbox=function($postbox){$postbox.toggleClass("closed")},obj.event.toggleLinkedForm=function(){obj.toggleLinkedForm($(this))},obj.event.selectSavedFieldset=function(){const savedFieldsetId=$(this).val();savedFieldsetId&&0!==parseInt(savedFieldsetId,10)&&obj.inject_saved_fields(savedFieldsetId)},obj.event.addField=function(e){e.preventDefault(),obj.addField($(this).data("type"))},obj.event.removeField=function(e){e.preventDefault(),obj.removeField($(this).closest(".meta-postbox"))},obj.event.editTicket=function(){obj.initTicketFields()},obj.event.clickPostbox=function(){obj.toggle_postbox($(this).closest(".meta-postbox"))},obj.event.savedTicket=function(e,response){if(void 0===response.fieldsets||!response.success)return;const $fieldsets=$(document.getElementById("saved_ticket-attendee-info"));$fieldsets.find('option:not([value="0"])').remove();for(let i=0;i<response.fieldsets.length;i++)$fieldsets.append('<option value="'+response.fieldsets[i].ID+'" data-attendee-group="'+response.fieldsets[i].post_name.replace('"','\\"')+'">'+response.fieldsets[i].post_name+"</option>")},$(obj.init)}(window,document,jQuery,tribe_event_tickets_plus.meta.admin);