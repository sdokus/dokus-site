/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

tribe.tickets=tribe.tickets||{},tribe.dialogs=tribe.dialogs||{},tribe.dialogs.events=tribe.dialogs.events||{},tribe.tickets.manualAttendees={},function($,obj){const $document=$(document);obj.selectors={modalWrapper:".tribe-modal__wrapper--manual-attendees",modalTitle:".tribe-modal__title",modalContent:".tribe-modal__content",formAddAttendeeTicketSelect:".tribe-tickets__manual-attendees-add-attendee-ticket-select",form:".tribe-tickets__manual-attendees-form",formFieldName:".tribe-tickets__manual-attendees-form-field-name",formFieldEmail:".tribe-tickets__manual-attendees-form-field-email",formFieldEmailResend:".tribe-tickets__manual-attendees-resend-email",formFieldEmailResendCheckbox:".tribe-tickets__manual-attendees-resend-email-input",hiddenElement:".tribe-common-a11y-hidden",validationNotice:".tribe-tickets__notice--error"},obj.attendeeTicketEmail="",obj.modalClose=function(event,dialogEl){const $modalContent=$(dialogEl).find(obj.selectors.modalContent);obj.unbindModalEvents($modalContent)},obj.bindModalClose=function(){$(tribe.dialogs.events).on("tribeDialogCloseManualAttendeesModal.tribeTickets",obj.modalClose)},obj.unbindModalEvents=function($container){$container.find(obj.selectors.formFieldEmail).off(),$container.off("afterAjaxSuccess.tribeTicketsAdmin",obj.bindModalEvents),$container.off()},obj.bindAddAttendeeTicketSelectChange=function($container,requestData){$container.find(obj.selectors.formAddAttendeeTicketSelect).on("change",(function(){const data={action:"tribe_tickets_admin_manager",request:requestData.request,attendeeId:requestData.attendeeId,eventId:requestData.eventId,ticketId:this.value,provider:requestData.provider};tribe.tickets.admin.manager.request(data,$container)}))},obj.bindModalEvents=function(event,jqXHR,settings){const $container=event.data.container,data=event.data.requestData;obj.bindAddAttendeeTicketSelectChange($container,data),obj.bindEmailEvents($container),obj.bindForm($container)},obj.handleFormSuccess=function(event,jqXHR,settings){"submit"===event.data.requestData.step&&setTimeout((function(){location.reload()}),3e3)},obj.handleFormSubmission=function(e){e.preventDefault();const $form=$(this),$container=$form.closest(obj.selectors.modalContent),$errorNotice=$container.find(obj.selectors.validationNotice),params=$form.serializeArray(),attendeeId=$form.data("attendee-id")||null,data={action:"tribe_tickets_admin_manager",request:attendeeId?"tribe_tickets_manual_attendees_edit":"tribe_tickets_manual_attendees_add",attendeeId:attendeeId,eventId:$form.data("event-id")||null,ticketId:$form.data("ticket-id")||null,provider:$form.data("provider")||null,step:"submit"};if($(params).each((function(index,object){data[object.name]=object.value})),!tribe.tickets.meta.validateAttendeeTicket($container))return $errorNotice.show(),void document.getElementById(obj.selectors.form.className()).scrollIntoView({behavior:"smooth",block:"start"});$errorNotice.hide(),tribe.tickets.admin.manager.request(data,$container),$container.on("afterAjaxSuccess.tribeTicketsAdmin",{container:$container,requestData:data},obj.handleFormSuccess)},obj.bindForm=function($container){$container.find(obj.selectors.form).each((function(index,form){$(form).on("submit",obj.handleFormSubmission)}))},obj.bindEmailEvents=function($container){const $emailInput=$container.find(obj.selectors.formFieldEmail);obj.attendeeTicketEmail=$container.find(obj.selectors.formFieldEmail).val()||"",$emailInput.on("input",obj.handleEmailChangeCheck)},obj.handleEmailChangeCheck=function(event){const $input=$(event.target);obj.attendeeTicketEmail.trim().toLowerCase()!==$input.val().trim().toLowerCase()?obj.emailReSendCheckboxShow($input):obj.emailReSendCheckboxHide($input)},obj.emailReSendCheckboxShow=function($input){const $formFieldEmailResend=$input.closest(obj.selectors.form).find(obj.selectors.formFieldEmailResend);$formFieldEmailResend.find(obj.selectors.formFieldEmailResendCheckbox).prop("checked",!0),$formFieldEmailResend.removeClass(obj.selectors.hiddenElement.className())},obj.emailReSendCheckboxHide=function($input){const $formFieldEmailResend=$input.closest(obj.selectors.form).find(obj.selectors.formFieldEmailResend);$formFieldEmailResend.find(obj.selectors.formFieldEmailResendCheckbox).prop("checked",!1),$formFieldEmailResend.addClass(obj.selectors.hiddenElement.className())},obj.modalOpen=function(event,dialogEl,trigger){const $modal=$(dialogEl),$trigger=$(trigger.target).closest("button"),title=$trigger.data("modal-title"),attendeeId=$trigger.data("attendee-id")||null,eventId=$trigger.data("event-id")||null,ticketId=$trigger.data("ticket-id")||null,provider=$trigger.data("provider")||null,request=attendeeId?"tribe_tickets_manual_attendees_edit":"tribe_tickets_manual_attendees_add";if(title){$modal.find(obj.selectors.modalTitle).html(title)}const $modalContent=$modal.find(obj.selectors.modalContent),data={action:"tribe_tickets_admin_manager",request:request,attendeeId:attendeeId,eventId:eventId,ticketId:ticketId,provider:provider};tribe.tickets.admin.manager.request(data,$modalContent),$modalContent.on("afterAjaxSuccess.tribeTicketsAdmin",{container:$modalContent,requestData:data},obj.bindModalEvents)},obj.bindModalOpen=function(){$(tribe.dialogs.events).on("tribeDialogShowManualAttendeesModal.tribeTickets",obj.modalOpen)},obj.ready=function(){obj.bindModalOpen(),obj.bindModalClose()},$document.ready(obj.ready)}(jQuery,tribe.tickets.manualAttendees);